<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClassificaciÃ³ d'Emissions</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="pagina-joc">
    <div class="contenidor">
        <header>
            <h1>Classifica elements relatius al COâ‚‚</h1>
            <p>Arrossega cada element al seu impacte climÃ tic corresponent.</p>
        </header>
        
        <main>
            <div id="missatge" class="missatge-feedback">ComenÃ§a a classificar!</div>
            <button id="reiniciar">ğŸ”„ Tornar a jugar</button>

            <!-- Zona d'elements (Draggables) -->
            <div class="contenidor-elements" id="llista-elements">
                <div class="element-arrossegable" draggable="true" data-tipus="alta">ğŸ­ FÃ brica</div>                
                <div class="element-arrossegable" draggable="true" data-tipus="absorcio">ğŸŒ± Plantes</div>
                <div class="element-arrossegable" draggable="true" data-tipus="alta">ğŸš™ Cotxe Gasolina</div>
                <div class="element-arrossegable" draggable="true" data-tipus="nula">ğŸš² Bicicleta</div>
                <div class="element-arrossegable" draggable="true" data-tipus="absorcio">ğŸŒ³ Arbre</div>
                <div class="element-arrossegable" draggable="true" data-tipus="nula">ğŸŒ¬ï¸ MolÃ­ de Vent</div>
                <div class="element-arrossegable" draggable="true" data-tipus="nula">ğŸš¶ Caminar</div>
                <div class="element-arrossegable" draggable="true" data-tipus="alta">âœˆï¸ AviÃ³</div>
                <div class="element-arrossegable" draggable="true" data-tipus="absorcio">ğŸª¸ Algues marines</div>
                <div class="element-arrossegable" draggable="true" data-tipus="nula">â˜€ï¸ Placa Solar</div>
                
            </div>

            <!-- Zona de contenidors (Dropzones) -->
            <div class="contenidor-cubells">
                <div class="cubell vermell" data-accepta="alta">Alta EmissiÃ³</div>
                <div class="cubell groc" data-accepta="nula">EmissiÃ³ NulÂ·la</div>
                <div class="cubell verd" data-accepta="absorcio">AbsorciÃ³ de COâ‚‚</div>
            </div>
        </main>

        <footer>
            <p class="marge-top-20"><a href="INDEX_history.html">Tornar a l'Ã­ndex</a></p>
        </footer>
    </div>

    <script>
        /* ==========================================================================
           API 3: DRAG AND DROP API
           ========================================================================== */
        const elements = document.querySelectorAll('.element-arrossegable');
        const cubells = document.querySelectorAll('.cubell');
        const missatge = document.getElementById('missatge');
        const botoReiniciar = document.getElementById('reiniciar');

        // 1. ConfiguraciÃ³ dels elements arrossegables
        elements.forEach(element => {
            element.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', e.target.dataset.tipus);
                e.dataTransfer.effectAllowed = 'move';
                e.target.classList.add('arrossegant');
            });

            element.addEventListener('dragend', (e) => {
                e.target.classList.remove('arrossegant');
            });
        });

        // 2. ConfiguraciÃ³ de les zones de destÃ­ (Contenidors)
        cubells.forEach(cubell => {
            cubell.addEventListener('dragover', (e) => {
                e.preventDefault(); // Necessari per permetre el drop
                e.dataTransfer.dropEffect = 'move';
                cubell.classList.add('sobre-arrossegament'); // Feedback visual
            });

            cubell.addEventListener('dragleave', () => {
                cubell.classList.remove('sobre-arrossegament');
            });

            cubell.addEventListener('drop', (e) => {
                e.preventDefault();
                cubell.classList.remove('sobre-arrossegament');

                const tipusResidu = e.dataTransfer.getData('text/plain');
                const tipusContenidor = cubell.dataset.accepta;

                // ValidaciÃ³ de la lÃ²gica del joc
                if (tipusResidu === tipusContenidor) {
                    // Ãˆxit
                    missatge.textContent = "Correcte! âœ…";
                    missatge.style.color = "#2a9d8f";
                    
                    // Eliminem l'element arrossegat (simulant que estÃ  dins)
                    const elementArrossegat = document.querySelector('.arrossegant');
                    if (elementArrossegat) elementArrossegat.remove();

                    // Comprovar victÃ²ria
                    if (document.querySelectorAll('.element-arrossegable').length === 0) {
                        missatge.textContent = "Felicitats! Has classificat tot correctament! ğŸŒ";
                        botoReiniciar.style.display = "inline-block";
                    }
                } else {
                    // Error
                    missatge.textContent = "Incorrecte! Aquest element no pertany a aquesta categoria. âŒ";
                    missatge.style.color = "#e76f51";
                }
            });
        });

        botoReiniciar.onclick = function() {
            window.location.reload();
        };
    </script>
</body>
</html>